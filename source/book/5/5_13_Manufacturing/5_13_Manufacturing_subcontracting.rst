Subcontracting manufacture
===========================

In Open ERP it is possible to subcontract production operations (for example painting and item assembly) at a supplier's. To do this you must indicate on the relevant routing document a supplier location for stock management.

You must then configure a location dedicated to this supplier with the following data:

* Type of location: Supplier,

* Address of Location: Select an address of the subcontractor partner,

* Type of linkage: Fixed,

* Location of linkage: your Stock,

* Lead time for linkage: number of days before receipt of the finished product.

Then once the manufacture has been planned for the product in question, Open ERP will generate the following steps:

Delivery of raw materials to the stores for the supplier,

Production order for the products at the suppliers and receipt of the finished products in the stores.

Once the production order has been confirmed, Open ERP automatically generates a delivery order to send to the raw materials supplier. The storesperson can access this delivery order using the menu *Stock Management > Incoming Products*. The raw materials will then be placed in stock at the supplier's stores.

Once the delivery of raw materials has been confirmed, Open ERP activates the production order. The supplier uses the raw materials sent to produce the finished goods which will automatically be put in your own stores. The confirmation of this manufacture is made when you receive the products from your supplier. It's then that you indicate the quantities consumed by your supplier

.. tip::  **Point**  *Subcontract without routing*

    If you don't use routing you can always subcontract work orders by creating an empty routing in the subcontract bill of materials.

Production orders are found in the menu *Manufacture > Production Orders > Production Orders to start*. A production order is always carried out in two stages:

#. Consumption of raw materials

#. Production of finished products.

Depending on the company's needs, you can specify that the first step is confirmed at the acknowledgment of manufacturing supplier and the second at the receipt of finished goods in the warehouse.

Treatment of exceptions
------------------------

The set of stock requirements is generated by procurement orders. Then for each customer order line or raw materials in a manufacturing order, you will find a restocking form. To review all the procurement orders use the menu *Manufacturing > Procurement orders*.

In normal system use, you don't need to worry about procurement orders because they're automatically generated by Open ERP and the user will usually work on the results of a procurement: a production order, a task or a supplier order.

But if there are configuration problems, the system can remain blocked by a procurement without generating a corresponding document. For example, suppose that you configure a product “to produce” 'on order' but you haven't defined the bill of materials. In that case procurement of the product will stay blocked in an exception state 'No Bill of Materials defined for this product'. You must then create a bill of materials to unblock the problem.

Possible problems include:

* No bill of materials defined for production: in this case you've got to create one or indicate that the product can be purchased instead.

* No supplier available for a purchase: it's then necessary to define a supplier in the second tab of the product form.

* No address defined on the supplier partner: you must complete an address for the supplier by default for the product in consideration.

* No quantity available in stock: you must create a rule for automatically procuring (for example a minimum stock rule) and put it in the order, or manually procure it.

Some problems are just those of timing and can be automatically corrected by the system. That's why Open ERP has the two following menus:

* *Manufacturing > Automatic Procurement > Procurement Exceptions > Exceptions to correct*,

* *Manufacturing > Automatic Procurement > Procurement Exceptions > Temporary exceptions*.

If a product must be 'in stock' but is not available in your stores, Open ERP will make the exception in 'temporary' or 'to be corrected'. The exception is temporary if the system can procure it automatically, for example if a procurement rule is defined for minimum stock.

    .. image:: images/mrp_exception.png
       :align: center

*Example of a procurement in exception.*

If no procurement rule is defined the exception must be corrected manually by the user. Once the exception is corrected you can restart by clicking on 'Retry'. If you don't do that then Open ERP will automatically recalcualte on the next automated requirements calculation.

Manual procurement
-------------------

To procure internally, you can create a procurement order manually. Use the menu *Manufacturing > Procurement Orders > New Procurement* to do this.

    .. image:: images/mrp_procurement.png
       :align: center

*Encoding for a new procurement order.*

The procurement order will then be responsible for calculating a  proposal for automatic procurement for the product concerned. This procurement wll start a task, a purchase order form the supplier or a production depending on the product configuration.

    .. image:: images/mrp_procurement_flow.png
       :align: center

*Workflow for handling a procurement, a function of the product configuration.*

It is better to encode a procurement order rather than direct purchasing or production, That method has the following advantages:

The form is simpler because Open ERP calculates the different values from other values and defined rules: purchase date calculated from order date, default supplier, raw materials needs, selection of the most suitable bill of materials, etc

The calculation of requirements prioritises the procurements. If you encode a purchase directly you short-circuit the planning of different procurements.

.. tip::   **Point**  *Shortcuts*

    On the product form you have a shortcut to the left that lets you quickly create a new procurement order.

Management of waste products and secondary products
----------------------------------------------------

For the management of waste you must install the module *mrp_subproduct*. The normal behaviour of manufacture in Open ERP enables you to manufacture several units of the same finished product from raw materials (A + B > C). With waste management, the result of a manufacture can be to have both finished products and secondary products (A + B > C + D).

.. tip::   **Definition** *Waste material*

    In Open ERP waste material corresponds to secondary products that are a by-product of the main manufacturing process. For example, cutting planks of timber will produce other planks but these bits of timber are too small (or the offcuts may have value for the company if they can be used elsewhere).

If the module mrp_subproduct has been installed you get a new field in the Bill of Material that lets you set secondary products resulting from the manufacture of the finished product.

    .. image:: images/mrp_bom_subproduct.png
       :align: center

*Definition of waste products in a Bill of Materials.*

When Open ERP generates a production order based on a Bill of Materials that uses secondary product you pick up the list of all products in the the third tab of the production order 'Finished Products'.

    .. image:: images/mrp_production.png
       :align: center

*A production order producing several finished products.*

Secondary products enable you to generate several types of products from the same raw materials and manufacturing methods – only these aren't used in the calculation of requirements. Then if you need the secondary products Open ERP won't ask you to manufacture another product to use the waste products and secondary products of this manufacture. In this case you should enter another production order for the secondary product.

.. tip::   **Point** *Services in Manufacturing*

    Unlike most software for production management, Open ERP manages services as well as stockable products. So it's possible to put products of type *Service* in a Bill of Materials. These don't appear in the production order but their requirements will be taken into account.

    If they're defined as *Make to Order*. Open ERP will generate a task for the manufacture or a subcontract order for the operations. The behaviour will depend on the supply method configured on the product form *Buy* or *Produce*.


