


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Wizard - (The Process) &mdash; Documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="Documentation" href="../../index.html" />
    <link rel="up" title="Developer Book" href="../index.html" />
    <link rel="next" title="Reports" href="../3_11_reports/index.html" />
    <link rel="prev" title="Workflow-Business Process" href="../3_9_Workflow_Business_Process/index.html" />
<script src="../../_static/tiny_js_kit_comment_control.js" type="text/javascript"></script>



 

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="../3_11_reports/index.html" title="Reports"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../3_9_Workflow_Business_Process/index.html" title="Workflow-Business Process"
             accesskey="P">previous</a> |</li>

          <li><a href="../index.html" accesskey="U">Developer Book</a> &raquo;</li> 
      </ul>
    </div>
  <div class="openobject-header">
    <table cellspacing="0" cellpadding="0" border="0" width="1004">
      <tbody>
        <tr>
           <td width="202" class="headerpic">
            <a alt="Open Object - Free Management Solution Logo" href="http://openerp.com">
              <img border="0" src="../../_static/openerp.jpg"/>
            </a>
          </td>
         <td width="335" class="headerpic">
            <div align="right"><img src="../../_static/headerpic.jpg" width="242" height="68" /></div>
          </td>
          <td width="440" valign="top" align="right">
            <table id="Table_01" height="37" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td class="greycurveleft" width="23px" height="37px"></td>
                <td width="107" class="headerlinkgrey">
                  <div class="headerlink" align="center"><a href="http://openerp.com"><strong>OpenERP</strong></a></div>
                </td>
                <td width="22px" height="37px" class="greyredcurve"></td>
                <td width="125" height="37" class="redline">
                  <div class="headerlink" align="center"><a href="http://ondemand.openerp.com"><strong>OnDemand</strong></a></div>
                </td>
                <td width="20" height="37" class="redcurve">&nbsp;</td>
                <td width="139" height="37" class="redline">
                  <div class="headerlink" align="center"><a href="http://openobject.com"><strong>Community</strong></a></div>
                </td>
                <td width="16" height="37"><img src="../../_static/curve.gif"/></td>
              </tr>
            </table>
            <p class="fortune">Best-selling book on enterprise management</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="openobject-navbar">
    <table width="1004" border="0" cellspacing="0" cellpadding="0" id="menu-header">
      <tr>
        <td width="230" id="menu-header" nowrap="nowrap">&nbsp;</td>
        <td id="menu-breadcrumb" nowrap="nowrap">
          
    <div class="related-tiny">
      <h3>Navigation</h3>
      <ul>
        <li class="right">
          <select id="comments_control">
            <option value="">comments control</option>
            <option value="HIDE">hide</option>
            <option value="SHOW">show</option>
          </select>
        </li>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="../3_11_reports/index.html" title="Reports"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../3_9_Workflow_Business_Process/index.html" title="Workflow-Business Process"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Developer Book</a> &raquo;</li> 
      </ul>
    </div>

        </td>
      </tr>
    </table>
  </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Creating Wizard - (The Process)</a><ul>
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#wizards-principles">Wizards - Principles</a><ul>
<li><a class="reference external" href="#the-list-of-actions">The list of actions</a></li>
</ul>
</li>
<li><a class="reference external" href="#specification">Specification</a><ul>
<li><a class="reference external" href="#form">Form</a></li>
<li><a class="reference external" href="#fields">Fields</a><ul>
<li><a class="reference external" href="#standard">Standard</a></li>
<li><a class="reference external" href="#relational">Relational</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#add-a-new-wizard">Add A New Wizard</a></li>
<li><a class="reference external" href="#osv-memory-wizard-system">osv_memory Wizard System</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../3_9_Workflow_Business_Process/index.html"
                                  title="previous chapter">Workflow-Business Process</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../3_11_reports/index.html"
                                  title="next chapter">Reports</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/developer/3_10_wizard/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
<div id="searchbox">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<h3>Open ERP Books</h3><br />
<table cellpading="10px" cellspacing="10px" style="border: 1px solid #98DBCC;" align="center" bgcolor="#FFFFFF">
  <tr>
   <td align="center">
   <span style="text-align:center;">
<iframe src="http://rcm-fr.amazon.fr/e/cm?t=fabsblo-21&o=8&p=8&l=as1&asins=2212122616&fc1=000000&IS2=
1&lt1=_blank&lc1=0000FF&bc1=FFFFFF&bg1=FFFFFF&f=ifr&npa=1" style="width:120px;height:240px;text-align:center;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
</span>
   </td>
  </tr>
  <tr> 
  <td align="center">
<a href="http://www.openerp.com/buy.html?page=shop.product_details&amp;flypage=openerp.tpl&amp;product_id=36&amp;category_id=8" title="Open ERP for Retail and Industrial Management" style="border:none;"><img src="http://www.openerp.com/components/com_virtuemart/shop_image/product/Open_ERP_for_Ret_4a1a9e3e3dec5.png" width="100px" height="134px" style="border:none; text-align:center;"></a>
<p style="font-size:10px;">Retail and Industrial Management, steps towards Sales, Logistics and Manufacturing Integration in the Open Source & Management Collection.</p>
</span>
</td>
</tr>
</table>

        </div>
      </div>


    <div class="document">
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-wizard-the-process">
<h1>Creating Wizard - (The Process)<a class="headerlink" href="#creating-wizard-the-process" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="js-kit-comments" path="/developer/3_10_wizard/index/introduction" ></div><p>Wizards describe interaction sequences between the client and the server.</p>
<p>Here is, as an example, a typical process for a wizard:</p>
<img alt="../../_images/Wizard.png" src="../../_images/Wizard.png" />
<p>Here is a screenshot of the wizard used to reconcile transactions (when you click on the gear icon in an account chart):</p>
<img alt="../../_images/Wizard_screenshot.png" src="../../_images/Wizard_screenshot.png" />
</div>
<div class="section" id="wizards-principles">
<h2>Wizards - Principles<a class="headerlink" href="#wizards-principles" title="Permalink to this headline">¶</a></h2>
<div class="js-kit-comments" path="/wizards-principles" ></div><p>A wizard is a succession of steps. A step is composed of several actions;</p>
<ol class="arabic simple">
<li>send a form to the client and some buttons</li>
<li>get the form result and the button pressed from the client</li>
<li>execute some actions</li>
<li>send a new action to the client (form, print, ...)</li>
</ol>
<p>To define a wizard, you have to create a class inheriting from <strong>wizard.interface</strong> and instantiate it. Each wizard must have a unique name, which can be chosen arbitrarily except for the fact it has to start with the module name (for example: account.move.line.reconcile). The wizard must define a dictionary named <strong>states</strong> which defines all its steps.</p>
<p>Here is an example of such a class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">wiz_reconcile</span><span class="p">(</span><span class="n">wizard</span><span class="o">.</span><span class="n">interface</span><span class="p">):</span>
      <span class="n">states</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s">&#39;init&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;actions&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">_trans_rec_get</span><span class="p">],</span>
                <span class="s">&#39;result&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;form&#39;</span><span class="p">,</span>
                           <span class="s">&#39;arch&#39;</span><span class="p">:</span> <span class="n">_transaction_form</span><span class="p">,</span>
                           <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">_transaction_fields</span><span class="p">,</span>
                           <span class="s">&#39;state&#39;</span><span class="p">:[(</span><span class="s">&#39;reconcile&#39;</span><span class="p">,</span><span class="s">&#39;Reconcile&#39;</span><span class="p">),(</span><span class="s">&#39;end&#39;</span><span class="p">,</span><span class="s">&#39;Cancel&#39;</span><span class="p">)]}</span>
          <span class="p">},</span>
           <span class="s">&#39;reconcile&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;actions&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">_trans_rec_reconcile</span><span class="p">],</span>
                <span class="s">&#39;result&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;state&#39;</span><span class="p">,</span> <span class="s">&#39;state&#39;</span><span class="p">:</span><span class="s">&#39;end&#39;</span><span class="p">}</span>
          <span class="p">}</span>
     <span class="p">}</span>
<span class="n">wiz_reconcile</span><span class="p">(</span><span class="s">&#39;account.move.line.reconcile&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The &#8216;states&#8217; dictionary define all the states of the wizard. In this example; <strong>init</strong> and <strong>reconcile</strong>. There is another state which is named end which is implicit.</p>
<p>A wizard always starts in the <strong>init</strong> state and ends in the <strong>end</strong> state.</p>
<p>A state define two things:</p>
<div class="section" id="the-list-of-actions">
<h3>The list of actions<a class="headerlink" href="#the-list-of-actions" title="Permalink to this headline">¶</a></h3>
<p>Each step/state of a wizard defines a list of actions which are executed when the wizard enters the state. This list can be empty.</p>
<p>The function (actions) must have the following signatures:</p>
<div class="highlight-python"><pre>def _trans_rec_get(self, uid, data, res_get=False):</pre>
</div>
<p>Where:</p>
<p>The result</p>
<p>Here are some result examples:</p>
<p>Result: next step</p>
<div class="highlight-python"><pre>'result': {'type': 'state',
           'state':'end'}</pre>
</div>
<p>Indicate that the wizard has to continue to the next state: &#8216;end&#8217;. If this is the &#8216;end&#8217; state, the wizard stops.</p>
<p>Result: new dialog for the client</p>
<div class="highlight-python"><pre>'result': {'type': 'form',
           'arch': _form,
           'fields': _fields,
           'state':[('reconcile','Reconcile'),('end','Cancel')]}</pre>
</div>
<p>The type=form indicate that this step is a dialog to the client. The dialog is composed of:</p>
<ol class="arabic simple">
<li>a form : with fields description and a form description</li>
<li>some buttons : on wich the user press after completing the form</li>
</ol>
<p>The form description (arch) is like in the views objects. Here is an example of form:</p>
<div class="highlight-xml"><div class="highlight"><pre>_form = &quot;&quot;&quot;<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">title=</span><span class="s">&quot;Reconciliation&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;separator</span> <span class="na">string=</span><span class="s">&quot;Reconciliation transactions&quot;</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;trans_nbr&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;newline/&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;credit&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;debit&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;separator</span> <span class="na">string=</span><span class="s">&quot;Write-Off&quot;</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;writeoff&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;newline/&gt;</span>
          <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;writeoff_acc_id&quot;</span> <span class="na">colspan=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
        &quot;&quot;&quot;
</pre></div>
</div>
<p>The fields description is similar to the fields described in the python ORM objects. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">_transaction_fields</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s">&#39;trans_nbr&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;string&#39;</span><span class="p">:</span><span class="s">&#39;# of Transaction&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;integer&#39;</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
      <span class="s">&#39;credit&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;string&#39;</span><span class="p">:</span><span class="s">&#39;Credit amount&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
      <span class="s">&#39;debit&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;string&#39;</span><span class="p">:</span><span class="s">&#39;Debit amount&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
      <span class="s">&#39;writeoff&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;string&#39;</span><span class="p">:</span><span class="s">&#39;Write-Off amount&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
      <span class="s">&#39;writeoff_acc_id&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;string&#39;</span><span class="p">:</span><span class="s">&#39;Write-Off account&#39;</span><span class="p">,</span>
                           <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;many2one&#39;</span><span class="p">,</span>
                           <span class="s">&#39;relation&#39;</span><span class="p">:</span><span class="s">&#39;account.account&#39;</span>
                         <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each step/state of a wizard can have several buttons. Those are located on the bottom right of the dialog box. The list of buttons for each step of the wizard is declared in the state key of its result dictionary.</p>
<p>For example:</p>
<div class="highlight-python"><pre>'state':[('end', 'Cancel', 'gtk-cancel'), ('reconcile', 'Reconcile', '', True)]</pre>
</div>
<ol class="arabic simple">
<li>the next step name (determine which state will be next)</li>
<li>the button string (to display for the client)</li>
<li>the gtk stock item without the stock prefix (since 4.2)</li>
<li>a boolean, if true the button is set as the default action (since 4.2)</li>
</ol>
<p>Here is a screenshot of this form:</p>
<img alt="../../_images/Wizard_screenshot1.png" src="../../_images/Wizard_screenshot1.png" />
<p>Result: call a method to determine which state is next</p>
<div class="highlight-python"><pre>def _check_refund(self, cr, uid, data, context):
    ...
    return datas['form']['refund_id'] and 'wait_invoice' or 'end'

    ...

    'result': {'type':'choice', 'next_state':_check_refund}</pre>
</div>
<p>Result: print a report</p>
<div class="highlight-python"><pre>def _get_invoice_id(self, uid, datas):
      ...
      return {'ids': [...]}

      ...

      'actions': [_get_invoice_id],
      'result': {'type':'print',
                 'report':'account.invoice',
                 'get_id_from_action': True,
                 'state':'check_refund'}</pre>
</div>
<p>Result: client run an action</p>
<div class="highlight-python"><pre>def _makeInvoices(self, cr, uid, data, context):
    ...
    return {
                'domain': "[('id','in', ["+','.join(map(str,newinv))+"])]",
                'name': 'Invoices',
                'view_type': 'form',
                'view_mode': 'tree,form',
                'res_model': 'account.invoice',
                'view_id': False,
                'context': "{'type':'out_refund'}",
                'type': 'ir.actions.act_window'
        }

        ...

        'result': {'type': 'action',
        'action': _makeInvoices,
        'state': 'end'}</pre>
</div>
<p>The result of the function must be an all the fields of an ir.actions.* Here it is an ir.action.act_window, so the client will open an new tab for the objects account.invoice For more information about the fields used click here.</p>
<p>It is recommended to use the result of a read on the ir.actions object like this:</p>
<div class="highlight-python"><pre>def _account_chart_open_window(self, cr, uid, data, context):
        mod_obj = pooler.get_pool(cr.dbname).get('ir.model.data')
        act_obj = pooler.get_pool(cr.dbname).get('ir.actions.act_window')

        result = mod_obj._get_id(cr, uid, 'account', 'action_account_tree')
        id = mod_obj.read(cr, uid, [result], ['res_id'])[0]['res_id']
        result = act_obj.read(cr, uid, [id])[0]
        result['context'] = str({'fiscalyear': data['form']['fiscalyear']})
        return result

        ...

        'result': {'type': 'action',
                   'action': _account_chart_open_window,
                   'state':'end'}</pre>
</div>
</div>
</div>
<div class="section" id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h2>
<div class="js-kit-comments" path="/specification" ></div><div class="section" id="form">
<h3>Form<a class="headerlink" href="#form" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre>_form = &#39;&#39;&#39;<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;form</span> <span class="na">string=</span><span class="s">&quot;Your String&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;Field 1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;newline/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;Field 2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>&#39;&#39;&#39;
</pre></div>
</div>
</div>
<div class="section" id="fields">
<h3>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<div class="section" id="standard">
<h4>Standard<a class="headerlink" href="#standard" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>Field type: char, integer, boolean, float, date, datetime

_fields = {
      'str_field': {'string':'product name', 'type':'char', 'readonly':True},
}</pre>
</div>
<ul class="simple">
<li><strong>string</strong>: Field label (required)</li>
<li><strong>type</strong>: (required)</li>
<li><strong>readonly</strong>: (optional)</li>
</ul>
</div>
<div class="section" id="relational">
<h4>Relational<a class="headerlink" href="#relational" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>Field type: one2one,many2one,one2many,many2many

_fields = {
    'field_id': {'string':'Write-Off account', 'type':'many2one', 'relation':'account.account'}
}</pre>
</div>
<ul class="simple">
<li><strong>string</strong>: Field label (required)</li>
<li><strong>type</strong>: (required)</li>
<li><strong>relation</strong>: name of the relation object</li>
</ul>
</div>
</div>
</div>
<div class="section" id="add-a-new-wizard">
<h2>Add A New Wizard<a class="headerlink" href="#add-a-new-wizard" title="Permalink to this headline">¶</a></h2>
<div class="js-kit-comments" path="/add-a-new-wizard" ></div><p>To create a new wizard, you must:</p>
<p>The declaration is needed to map the wizard with a key of the client; when to launch which client. To declare a new wizard, you need to add it to the module_name_wizard.xml file, which contains all the wizard declarations for the module. If that file does not exist, you need to create it first.</p>
<p>Here is an example of the account_wizard.xml file;</p>
<div class="highlight-python"><pre>&lt;?xml version="1.0"?&gt;
&lt;terp&gt;
    &lt;data&gt;
        &lt;delete model="ir.actions.wizard" search="[('wiz_name','like','account.')]" /&gt;
        &lt;wizard string="Reconcile Transactions" model="account.move.line"
                name="account.move.line.reconcile" /&gt;
        &lt;wizard string="Verify Transac steptions" model="account.move.line"
                name="account.move.line.check" keyword="tree_but_action" /&gt;
        &lt;wizard string="Verify Transactions" model="account.move.line"
                name="account.move.line.check" /&gt;
        &lt;wizard string="Print Journal" model="account.account"
                name="account.journal" /&gt;
        &lt;wizard string="Split Invoice" model="account.invoice"
                name="account.invoice.split" /&gt;
        &lt;wizard string="Refund Invoice" model="account.invoice"
                name="account.invoice.refund" /&gt;
    &lt;/data&gt;
&lt;/terp&gt;</pre>
</div>
<p>Attributes for the wizard tag:</p>
<p><strong>__terp__.py</strong></p>
<p>If the wizard you created is the first one of its module, you probably had to create the modulename_wizard.xml file yourself. In that case, it should be added to the update_xml field of the __terp__.py file of the module.</p>
<p>Here is, for example, the <strong>__terp__.py</strong> file for the account module.</p>
<div class="highlight-python"><pre>{
    "name": Open ERP Accounting",
    "version": "0.1",
    "depends": ["base"],
    "init_xml": ["account_workflow.xml", "account_data.xml"],
    "update_xml": ["account_view.xml","account_report.xml", "account_wizard.xml"],
}</pre>
</div>
</div>
<div class="section" id="osv-memory-wizard-system">
<h2>osv_memory Wizard System<a class="headerlink" href="#osv-memory-wizard-system" title="Permalink to this headline">¶</a></h2>
<div class="js-kit-comments" path="/osv-memory-wizard-system" ></div><p>To develop osv_memory wizard, just create a normal object, But instead of inheriting from osv.osv, Inherit from osv.osv_memory. Methods of &#8220;wizard&#8221; are in object and if the wizard is complex, You can define workflow on object. osv_memory object is managed in memory instead of storing in postgresql.</p>
<p>That&#8217;s all, nothing more than just changing the inherit.</p>
<p>So what makes them looks like &#8216;old&#8217; wizards?</p>
<div class="highlight-python"><pre>&lt;field name="target"&gt;new&lt;/field&gt;</pre>
</div>
<p>It means the object will open in a new window instead of the current one.</p>
<p>Example : In project.py file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">config_compute_remaining</span><span class="p">(</span><span class="n">osv</span><span class="o">.</span><span class="n">osv_memory</span><span class="p">):</span>
    <span class="n">_name</span><span class="o">=</span><span class="s">&#39;config.compute.remaining&#39;</span>
    <span class="k">def</span> <span class="nf">_get_remaining</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">if</span> <span class="s">&#39;active_id&#39;</span> <span class="ow">in</span> <span class="n">ctx</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;project.task&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="n">uid</span><span class="p">,</span><span class="n">ctx</span><span class="p">[</span><span class="s">&#39;active_id&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">remaining_hours</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="n">_columns</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;remaining_hours&#39;</span> <span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="s">&#39;Remaining Hours&#39;</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="p">(</span><span class="mf">16</span><span class="p">,</span><span class="mf">2</span><span class="p">),),</span>
            <span class="p">}</span>
    <span class="n">_defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;remaining_hours&#39;</span><span class="p">:</span> <span class="n">_get_remaining</span>
        <span class="p">}</span>
    <span class="k">def</span> <span class="nf">compute_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="s">&#39;active_id&#39;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">remaining_hrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="n">uid</span><span class="p">,</span><span class="n">ids</span><span class="p">)[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">remaining_hours</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;project.task&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="n">uid</span><span class="p">,</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;active_id&#39;</span><span class="p">],</span>
                                                 <span class="p">{</span><span class="s">&#39;remaining_hours&#39;</span> <span class="p">:</span> <span class="n">remaining_hrs</span><span class="p">})</span>
        <span class="k">return</span> <span class="p">{</span>
                <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;ir.actions.act_window_close&#39;</span><span class="p">,</span>
         <span class="p">}</span>
<span class="n">config_compute_remaining</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>View is same as normal view (Note buttons).</li>
</ul>
<p>Example :</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;view_config_compute_remaining&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.ui.view&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Compute Remaining Hours <span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="nt">&gt;</span>config.compute.remaining<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;type&quot;</span><span class="nt">&gt;</span>form<span class="nt">&lt;/field&gt;</span>
            <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;arch&quot;</span> <span class="na">type=</span><span class="s">&quot;xml&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;form</span> <span class="na">string=</span><span class="s">&quot;Remaining Hours&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;separator</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span> <span class="na">string=</span><span class="s">&quot;Change Remaining Hours&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;newline/&gt;</span>
                    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;remaining_hours&quot;</span> <span class="na">widget=</span><span class="s">&quot;float_time&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;group</span> <span class="na">col=</span><span class="s">&quot;4&quot;</span> <span class="na">colspan=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;button</span> <span class="na">icon=</span><span class="s">&quot;gtk-cancel&quot;</span> <span class="na">special=</span><span class="s">&quot;cancel&quot;</span> <span class="na">string=</span><span class="s">&quot;Cancel&quot;</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;button</span> <span class="na">icon=</span><span class="s">&quot;gtk-ok&quot;</span> <span class="na">name=</span><span class="s">&quot;compute_hours&quot;</span> <span class="na">string=</span><span class="s">&quot;Update&quot;</span> <span class="na">type=</span><span class="s">&quot;object&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/group&gt;</span>
                <span class="nt">&lt;/form&gt;</span>
            <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Action is also same as normal action (don&#8217;t forget to add target attribute)</li>
</ul>
<p>Example :</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;record</span> <span class="na">id=</span><span class="s">&quot;action_config_compute_remaining&quot;</span> <span class="na">model=</span><span class="s">&quot;ir.actions.act_window&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Compute Remaining Hours<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;type&quot;</span><span class="nt">&gt;</span>ir.actions.act_window<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;res_model&quot;</span><span class="nt">&gt;</span>config.compute.remaining<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;view_type&quot;</span><span class="nt">&gt;</span>form<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;view_mode&quot;</span><span class="nt">&gt;</span>form<span class="nt">&lt;/field&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;target&quot;</span><span class="nt">&gt;</span>new<span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/record&gt;</span>
</pre></div>
</div>
</div>
</div>


            <br />
            <div class="js-kit-comments" permalink=""></div>
            <script src="http://js-kit.com/comments.js"></script>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Creating Wizard - (The Process)</a><ul>
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#wizards-principles">Wizards - Principles</a><ul>
<li><a class="reference external" href="#the-list-of-actions">The list of actions</a></li>
</ul>
</li>
<li><a class="reference external" href="#specification">Specification</a><ul>
<li><a class="reference external" href="#form">Form</a></li>
<li><a class="reference external" href="#fields">Fields</a><ul>
<li><a class="reference external" href="#standard">Standard</a></li>
<li><a class="reference external" href="#relational">Relational</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#add-a-new-wizard">Add A New Wizard</a></li>
<li><a class="reference external" href="#osv-memory-wizard-system">osv_memory Wizard System</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../3_9_Workflow_Business_Process/index.html"
                                  title="previous chapter">Workflow-Business Process</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../3_11_reports/index.html"
                                  title="next chapter">Reports</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/developer/3_10_wizard/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
<div id="searchbox">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<h3>Open ERP Books</h3><br />
<table cellpading="10px" cellspacing="10px" style="border: 1px solid #98DBCC;" align="center" bgcolor="#FFFFFF">
  <tr>
   <td align="center">
   <span style="text-align:center;">
<iframe src="http://rcm-fr.amazon.fr/e/cm?t=fabsblo-21&o=8&p=8&l=as1&asins=2212122616&fc1=000000&IS2=
1&lt1=_blank&lc1=0000FF&bc1=FFFFFF&bg1=FFFFFF&f=ifr&npa=1" style="width:120px;height:240px;text-align:center;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
</span>
   </td>
  </tr>
  <tr> 
  <td align="center">
<a href="http://www.openerp.com/buy.html?page=shop.product_details&amp;flypage=openerp.tpl&amp;product_id=36&amp;category_id=8" title="Open ERP for Retail and Industrial Management" style="border:none;"><img src="http://www.openerp.com/components/com_virtuemart/shop_image/product/Open_ERP_for_Ret_4a1a9e3e3dec5.png" width="100px" height="134px" style="border:none; text-align:center;"></a>
<p style="font-size:10px;">Retail and Industrial Management, steps towards Sales, Logistics and Manufacturing Integration in the Open Source & Management Collection.</p>
</span>
</td>
</tr>
</table>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../3_11_reports/index.html" title="Reports"
             >next</a> |</li>
        <li class="right" >
          <a href="../3_9_Workflow_Business_Process/index.html" title="Workflow-Business Process"
             >previous</a> |</li>

          <li><a href="../index.html" >Developer Book</a> &raquo;</li> 
      </ul>
    </div>


    <div class="related-tiny">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I" class="bottom-nav-links" >index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M" class="bottom-nav-links" >modules</a> |</li>
        <li class="right" >
          <a href="../3_11_reports/index.html" title="Reports"
             accesskey="N" class="bottom-nav-links" >next</a> |</li>
        <li class="right" >
          <a href="../3_9_Workflow_Business_Process/index.html" title="Workflow-Business Process"
             accesskey="P" class="bottom-nav-links" >previous</a> |</li>
        <li><a href="../../index.html">Documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Developer Book</a> &raquo;</li>
        
      </ul>
    </div>

    <div class="footer">
      &copy; <a href="../../copyright.html">Copyright</a> .
      Last updated on 2009-07-16.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
<script type="text/javascript">

var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));

try {
  var pageTracker = _gat._getTracker("UA-7333765-8");
  pageTracker._trackPageview();
} catch(err) {}

</script>

  </body>
</html>